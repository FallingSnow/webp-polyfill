var webpPolyfill={_convertBinaryToArray:function(a){var c=[],e=a.length,d;for(d=0;d<e;++d)c.push(a.charCodeAt(d));return c},_WebPDecodeAndDraw:function(a,c){var e=new WebPDecoder;c=c.split("").map(function(a){return String.fromCharCode(a.charCodeAt(0)&255)}).join("");c=webpPolyfill._convertBinaryToArray(c);var d=e.WebPDecoderConfig,b=d.j,m=d.input;if(!e.WebPInitDecoderConfig(d))return console.error("Library version mismatch!"),-1;status=e.WebPGetFeatures(c,c.length,m);0!=status&&console.error("Unable to decode webp image.");
b.J=4;status=e.WebPDecode(c,c.length,d);if(0!=status)return console.error("Decoding failed."),-1;var h=b.c.RGBA.ma;if(h){e=b.height;b=b.width;a.attr("height",e).attr("width",b);a=a[0];d=a.width;m=a.height;a.width=b;a.height=e;for(var k=a.getContext("2d"),l=k.createImageData(a.width,a.height),n=l.data,f=0;f<e;f++)for(var g=0;g<b;g++)n[0+4*g+4*b*f]=h[1+4*g+4*b*f],n[1+4*g+4*b*f]=h[2+4*g+4*b*f],n[2+4*g+4*b*f]=h[3+4*g+4*b*f],n[3+4*g+4*b*f]=h[0+4*g+4*b*f];k.putImageData(l,0,0);k.drawImage(a,0,0);h=k.getImageData(0,
0,a.width,a.height);l=jQuery("<canvas>").attr("width",h.width).attr("height",h.height)[0];l.getContext("2d").putImageData(h,0,0);a.width=d;a.height=m;k.scale(d/b,m/e);k.drawImage(l,0,0);return a.toDataURL()}},_process:function(a,c){a=jQuery(a);var e=a.attr("src");if("webp"===e.split(".").pop()){var d=jQuery('<canvas style="display: none;"></canvas>');jQuery.ajax(e,{processData:!1,mimeType:"text/plain; charset=x-user-defined"}).done(function(b){a.attr("src",webpPolyfill._WebPDecodeAndDraw(d,b))});
c||(jQuery(a).off("DOMAttrModified.webp"),jQuery(a).on("DOMAttrModified.webp",function(){var b=a.attr("src");if("webp"===b.split(".").pop()){var c=jQuery('<canvas style="display: none;"></canvas>');jQuery.ajax(b,{processData:!1,mimeType:"text/plain; charset=x-user-defined"}).done(function(b){a.attr("src",webpPolyfill._WebPDecodeAndDraw(c,b))})}}))}},evaluateParent:function(a,c){jQuery(a).find("img").each(function(a,d){webpPolyfill._process(d,c)})},evaluate:function(a,c){webpPolyfill._process(a,c)},
detach:function(a){a=jQuery(a);jQuery(a).off("DOMAttrModified.webp")},getDataUriOfWebpImage:function(a){a=jQuery(a);a=a.attr("src");if("webp"!==a.split(".").pop())return!1;var c=jQuery('<canvas style="display: none;"></canvas>');jQuery.ajax(a,{processData:!1,mimeType:"text/plain; charset=x-user-defined"}).done(function(a){return webpPolyfill._WebPDecodeAndDraw(c,a)})},getDataUriOfWebpUrl:function(a){var c=jQuery('<canvas style="display: none;"></canvas>');jQuery.ajax(a,{processData:!1,mimeType:"text/plain; charset=x-user-defined"}).done(function(a){return webpPolyfill._WebPDecodeAndDraw(c,
a)})}};